---
stepsCompleted: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]
inputDocuments:
  - "/Volumes/work/project/game/docs/prototype-summary.md"
documentCounts:
  briefs: 0
  research: 0
  brainstorming: 0
  projectDocs: 1
workflowType: 'gdd'
lastStep: 3
project_name: 'game'
user_name: 'Yuchenghuang'
date: '2026-02-16'
game_type: 'roguelike'
game_name: '打字肉鸽'
---

# 打字肉鸽 - Game Design Document

**Author:** Yuchenghuang
**Game Type:** Roguelike (混合 Deck-building + Typing)
**Target Platform(s):** PC (Steam)

---

## Executive Summary

### Game Name

打字肉鸽 (Typing Roguelike)

### Core Concept

**打字肉鸽** 是一款融合打字游戏与 Roguelike 牌组构筑的创新游戏。玩家在限时关卡中通过快速准确的打字获取分数，同时利用技能绑定、词库构筑和遗物系统不断增强自己的实力。

灵感来源于 **Balatro（小丑牌）** 的构筑深度与 **Backpack Battles** 的装备协同机制，游戏将打字这一核心输入转化为策略性的 Roguelike 体验。独特的 **键盘相邻联动系统** 让技能配置不仅关乎"选什么"，更关乎"放哪里"——QWERTY 键盘的物理布局成为策略空间的一部分。

每一局游戏，玩家从基础技能和初始词库出发，通过商店购买新技能、收集遗物、优化词库，逐步构建出独特的 Build。达成目标分数即可进入下一关，失败则重新开始——但每次失败都是学习新策略的机会。

### 设计原则（First Principles）

**心流优先:** 打字时的节奏感和速度感是核心体验。所有系统设计必须强化而非打断打字心流。

**数字即奖励:** 分数和倍率的视觉反馈是主要多巴胺来源。数字爆炸必须明显、夸张、令人满足。

**选择即意义:** 技能配置和词库构筑给玩家所有权感。每个选择都应该有可感知的影响。

**失败即发现:** 每次失败都应该揭示新的可能性，而非单纯的惩罚。

### 设计承诺

**流畅至上:** 所有视觉反馈和动画都为高速打字优化，确保 100+ WPM 玩家也能获得丝滑体验。

**深度构筑:** 15+ 技能 × 键盘位置联动 × 遗物协同，提供数百种 Build 可能性，鼓励玩家探索"破格"组合。

**渐进复杂度:** 新手从简单的单技能开始，随着游戏进程逐步解锁更多系统，避免信息过载。

**Meta 进度:** 每次游戏都能解锁新技能、新遗物、新词库，失败不是终点而是新可能的开始。

### 设计方向（待探索）

**核心创新机会:**
- **AI 多语言词库系统** - 利用 AI 翻译 + 拼音/罗马化生成，实现低成本全球本地化。支持中文拼音、日语罗马字、韩语罗马化等，一套核心词库自动扩展到多语言市场。
- 每日挑战 + 全球排行 - 社交留存机制
- 词语触发隐藏技能 - 增加发现乐趣，词语价值差异化

**SCAMPER 探索方向:**

*采纳:*
- **节奏打字机制** - 借鉴音游，在特定时机打字获得额外倍率；允许1-2次错误不断连击（Good判定）
- **倍率爆发** - 放大数字爽感，允许极端倍率时刻（x100+）；完美连击后倍率翻倍；高倍率时视觉效果更夸张
- **手牌词库** - 每回合从词库"抽取"若干词，选择打哪些、跳过哪些，增加策略层

*待探索:*
- **键盘区域效果** - 左手区/右手区不同属性；数字行/上排/中排/下排各有加成；对角线连锁组合技
- **简化技能系统** - 技能只有"有/无"，去除升级复杂度
- **选择权替代金币** - 每关获得"选择权"，从固定选项中选取，保证构筑可规划

*特殊敌人设计素材:*
- **词语血条敌人** - 词语有HP，打错字扣血，词死亡扣总分（作为特殊关卡或Boss机制）

**竞品借鉴（Roguelike 结构）:**

*采纳:*
- **发现系统（借鉴 Balatro）** - 隐藏技能组合、特殊词语触发彩蛋，增加探索乐趣
- **碎片化成就（借鉴 Vampire Survivors）** - 大量小成就频繁解锁，保持新鲜感和进度感

*待探索:*
- **Pact 式难度（借鉴 Hades）** - 自选诅咒组合替代固定 Ascension，提高自定义度
- **关内多手机制（借鉴 Balatro）** - 每关打多个"词组"而非连续词流，增加节奏变化

**设计定位:** 短局(15-25min) + 中高复杂度，接近 Balatro 体验

### Game Type

**Type:** Roguelike (混合 Deck-building + Typing)

**Framework:** 本 GDD 使用 Roguelike 模板，包含以下特定章节：
- Run 结构与关卡设计
- 程序生成（词语选择、商店物品）
- 永久死亡与 Meta 进度
- 技能/遗物/词库系统
- 难度曲线与挑战模式

---

## Target Platform(s)

### Primary Platform

**PC (Windows)** - Steam 发行

### Platform Considerations

- **完整键盘支持** - 打字游戏的最佳体验环境
- **Steam 生态** - 成就系统、云存档、创意工坊(未来)、社区中心
- **无性能瓶颈** - Web 技术栈 (Vite + TypeScript) 可通过 Electron 打包
- **数据统计** - Steamworks API 支持详细玩家行为分析

### Control Scheme

- **键盘** - 核心输入，QWERTY 布局打字
- **鼠标** - 商店/菜单交互、技能绑定拖拽

### Future Considerations

- Web 演示版作为获客渠道（暂不优先）
- 移动端需重新设计输入方案（暂不考虑）

---

## Target Audience

### Demographics

**主要受众:** 18-35 岁，成长于键盘时代的游戏玩家

**地域:** 全球，优先英文市场；中文/日文市场作为差异化机会

### Gaming Experience

**核心玩家为主** - 熟悉 Roguelike 循环，享受构筑深度和"再来一局"的心理

**兼顾休闲玩家** - 通过渐进复杂度和新手引导降低门槛

### Genre Familiarity

**期望有一定经验** - 理想玩家玩过 Slay the Spire、Balatro、Hades 等 Roguelike

**允许新手入门** - 但需要良好的教程和难度曲线

### Typing Skill Level

**目标: 50-80 WPM** - 普通偏上，能体验心流但不会过于简单

**弹性设计:** 词库难度分层，适应不同打字水平

### Session Length

**15-30 分钟/局** - 碎片友好但有深度，符合 Balatro 式体验

**支持中断:** 关卡间可随时退出，进度自动保存

### Player Motivations

- 🎯 **构筑乐趣** - 探索技能/遗物/词库组合
- ⚡ **心流体验** - 高速打字带来的"指尖飞舞"感
- 📈 **数字爆炸** - 看倍率飙升的多巴胺
- 🏆 **挑战自我** - 打字速度 + 策略深度的双重成长

---

## Goals and Context

### Unique Selling Points (USPs)

1. **🎹 键盘即棋盘** ⚠️ *待调整* - QWERTY 布局成为策略空间，技能相邻联动创造独特构筑维度
2. **🌍 AI 多语言词库系统** - 利用 AI 翻译 + 拼音/罗马化，低成本实现全球本地化
3. **⌨️ 打字即战斗** - 将打字从"输入方式"提升为"核心玩法"，每个击键都有战略意义
4. **🔥 Balatro 式爽感** - 倍率叠加、数字爆炸、"破格 Build"的多巴胺体验

### Project Goals

1. **验证核心玩法** - 证明"打字+Roguelike构筑"的混合模式能够创造独特且有吸引力的游戏体验
2. **建立技术基础** - 完成可扩展的技能/词库/遗物系统架构，支持后续内容迭代
3. **确定市场定位** - 通过 Demo 反馈确认目标受众和营销策略
4. **Steam 发行准备** - 完成 EA 或正式版发行所需的核心功能和内容量

### Risk Acknowledgment

| 风险 | 缓解策略 |
|------|----------|
| 打字门槛限制受众 | 词库难度分层 + 新手引导 + 难度选项 |
| 联动系统不直观 | 强化视觉反馈 + 简化初期体验 + 渐进教学 |
| 构筑深度不足 | 遗物系统作为第二构筑维度 + 词语触发技能 |
| 重复感快速到来 | 每日挑战 + 成就系统 + Meta 解锁 |

### Competitive Analysis Summary

**市场定位公式:** 打字肉鸽 = Balatro 的构筑深度 + MonkeyType 的心流体验

| 维度 | 打字肉鸽 | Balatro | Typing of the Dead | MonkeyType |
|------|----------|---------|-------------------|------------|
| 构筑深度 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐ |
| 打字心流 | ⭐⭐⭐⭐⭐ | N/A | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| 数字爽感 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐ |
| 重玩价值 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ |

### Design Challenges (待解决)

基于苏格拉底式追问，以下设计挑战需要在后续开发中明确解决：

1. **压力源设计** - 除时间限制外，需要额外的紧张感来源。"打字即战斗"需要真正的"战斗感"
2. **联动可理解性** - 键盘相邻系统需要更直观的视觉反馈和教学设计，确保玩家能感知策略成功
3. **多语言定位** - 明确 AI 词库是"便捷本地化覆盖"而非"原生语言体验"，调整市场预期
4. **受众定位** - 核心受众是"追求新奇体验的游戏玩家"，而非"想练打字的人"或"纯 Roguelike 玩家"

**第一性原理审视（Roguelike 结构）:**

5. **失败惩罚分层** - 区分"策略失败"（构筑不够强）和"手速失败"（打字太慢）的惩罚强度；后者不应过度惩罚
6. **打字疲劳管理** - 连续高强度打字会导致专注力下降；考虑关卡间/波次间的"喘息"机会
7. **经济系统简化** - 金币可能让游戏"不够打字"；探索"选择权"模式（每关选1/3）替代复杂定价
8. **键位记忆负担** - 战斗中玩家难以记住所有绑定；需要实时视觉提示（当前词包含的技能键高亮）
9. **胜负条件探索** - "敌人血条"可能比"目标分数"更有战斗感；待原型验证

### Background and Rationale

*（待补充：项目起源、团队背景、市场机会分析）*

---

## Core Gameplay

### Game Pillars

游戏支柱是设计决策的"北极星"——所有功能都应强化这些核心体验。

| 支柱 | 核心体验 | 设计指导 |
|------|----------|----------|
| ⚡ **打字心流** | 高速打字的"指尖飞舞"感 | 所有系统不得打断打字节奏；反馈必须即时 |
| 🔢 **数字爆炸** | 倍率叠加的多巴胺冲击 | 分数增长必须可视化；允许"破格"数值 |
| 🧩 **策略构筑** | 技能/遗物/词库的组合探索 | 每次选择有意义；鼓励发现协同效果 |

### Core Gameplay Loop

**单局循环 (Run Loop):**

```
开始 Run
  ↓
┌─────────────────────────────────────────┐
│ 关卡 (Stage)                            │
│   ↓                                     │
│ 战斗阶段: 打字 → 触发技能 → 累积分数    │
│   ↓                                     │
│ 结算: 达成目标? ──否──→ Game Over       │
│   │是                                   │
│   ↓                                     │
│ 奖励阶段: 商店/技能选择/遗物            │
│   ↓                                     │
│ 下一关卡 ←──────────────────────────────┘
└─────────────────────────────────────────┘
  ↓ (通关全部关卡)
胜利结算 + Meta 进度
```

**战斗内循环 (Battle Loop):**

```
词语出现 → 打字输入 → 字母匹配判定 → 触发绑定技能 → 分数/倍率更新 → 下一词语
     ↑                                                        │
     └────────────────────────────────────────────────────────┘
```

### Win/Loss Conditions

| 条件 | 触发 | 结果 |
|------|------|------|
| **关卡胜利** | 时间结束时分数 ≥ 目标分数 | 进入奖励阶段，继续下一关 |
| **关卡失败** | 时间结束时分数 < 目标分数 | Run 结束，进入 Game Over |
| **Run 胜利** | 通关全部关卡（如8关） | 胜利结算，解锁 Meta 内容 |
| **中途退出** | 玩家主动退出 | 保存进度，可继续 |

---

## Game Mechanics

### Primary Mechanics

#### 打字系统

| 机制 | 描述 | 参数 |
|------|------|------|
| **字母匹配** | 逐字母判定，正确即推进 | 即时反馈 |
| **错误惩罚** | 打错字重置当前词进度，断连击 | 可被护盾抵消 |
| **连击系统** | 连续正确击键累积连击数 | 影响倍率 |
| **词语完成** | 完成整词触发分数结算+技能 | 基础分 = 词长 × 10 |

#### 技能系统

**技能分类:**

| 类型 | 联动方式 | 说明 |
|------|----------|------|
| **被动技能** | 键盘相邻联动 | 基于QWERTY物理位置，相邻被动技能产生协同加成 |
| **主动技能** | 技能链联动 | 触发后影响下一个技能（如：下一技能效果翻倍） |

**被动技能联动（位置敏感）:**
- 光环类：为相邻键位的其他技能提供加成
- 核心类：根据相邻技能数量增强效果
- 孤狼类：无相邻技能时效果翻倍

**主动技能联动（顺序敏感）:**
- 回响：触发后，下一个技能也被触发
- 涟漪：触发后，下一个技能效果 ×1.5
- 连锁：触发后，为后续 N 个技能叠加倍率

*设计原则：主动技能的联动基于触发顺序而非键盘位置，更直观易懂。*

#### 分数系统

| 机制 | 描述 | 公式 |
|------|------|------|
| **基础分** | 词语长度决定 | 词长 × 10 |
| **技能加分** | 技能触发额外分数 | +技能值 × 倍率 |
| **倍率叠加** | 技能和连击增加倍率 | 基础1.0 + 技能加成 + 连击加成 |
| **最终分** | 词语完成时结算 | (基础分 + 技能分) × 倍率 |

#### 商店/构筑系统

| 机制 | 描述 |
|------|------|
| **关卡间商店** | 每关后可购买技能/遗物 |
| **金币获取** | 通关奖励 + 额外成就 |
| **技能升级** | 重复获得同技能提升等级 |
| **遗物效果** | 被动加成，全局生效 |

### Controls and Input

**设计原则:** 全程纯键盘操作，保持打字游戏风味。

#### 战斗场景

| 按键 | 功能 |
|------|------|
| A-Z | 打字输入 |
| Backspace | 重置当前词（可选） |
| Escape | 暂停菜单 |

#### 商店场景

| 按键 | 功能 |
|------|------|
| 1-9 | 选择对应槽位物品 |
| Enter | 确认购买 |
| Tab | 切换技能/遗物页签 |
| Escape | 跳过商店 |

#### 技能绑定场景

| 按键 | 功能 |
|------|------|
| 1-9 | 选择要绑定的技能 |
| A-Z | 选择绑定到的键位 |
| Backspace | 取消当前技能绑定 |
| Enter | 确认完成 |

#### 菜单/通用

| 按键 | 功能 |
|------|------|
| ↑↓ / W S | 导航选项 |
| Enter / Space | 确认 |
| Escape | 返回/取消 |

#### 输入响应要求

| 指标 | 目标值 |
|------|--------|
| 按键响应延迟 | < 16ms (1帧@60fps) |
| 视觉反馈延迟 | < 33ms (2帧@60fps) |
| 音效延迟 | < 50ms |

---

## Roguelike Specific Elements

### Run Structure

| 阶段 | 关卡数 | 特点 |
|------|--------|------|
| **Act 1** | 1-3 关 | 入门难度，建立基础 Build |
| **Act 2** | 4-6 关 | 中等难度，需要技能协同 |
| **Act 3** | 7-8 关 | 高难度，考验 Build 完成度 |
| **Boss** | 可选 | 特殊规则关卡（待设计） |

**单关流程:**
1. 战斗阶段（60秒，可被技能延长）
2. 结算判定
3. 奖励选择（商店/技能/遗物）

**速通支持:**
- 显示 Run 计时器
- 商店支持 Space 快速跳过
- 预计单局时长：12-20 分钟

### Procedural Generation

| 元素 | 生成规则 |
|------|----------|
| **词语** | 从当前词库随机抽取，难度渐进 |
| **商店物品** | 3-4个技能/遗物，保证类型多样性 |
| **遗物掉落** | 关卡奖励，稀有度随进度增加 |
| **目标分数** | 基础值 × 关卡系数 × 难度系数 |

**每日挑战:**
- 固定种子，全球玩家相同词库顺序
- 每日排行榜（分数/速度）
- 解锁条件：首次通关普通难度

### Permadeath and Progression

**永久死亡:**
- Run 失败后，当局所有技能/遗物/金币重置
- 保留：解锁的内容、成就、统计数据

**Meta 解锁系统:**

| 解锁方式 | 内容 | 设计意图 |
|----------|------|----------|
| **Build 成就** | 特定组合通关解锁相关技能 | 鼓励尝试不同玩法 |
| **里程碑** | 首次通关各 Act 解锁基础内容 | 保证进度感 |
| **挑战完成** | Ascension 等级解锁高级内容 | 硬核玩家目标 |

**图鉴系统:**
- 技能图鉴：已解锁/未解锁（灰色剪影）
- 遗物图鉴：显示获取条件
- 词库图鉴：收集进度
- 成就墙：展示达成记录

**发现系统（借鉴 Balatro）:**
- 隐藏技能组合：特定技能组合触发隐藏效果
- 彩蛋词语：打出特殊词语（如游戏名、开发者名）触发彩蛋
- 秘密遗物：特殊条件触发（如连续10关不买任何东西）
- 设计意图：增加探索乐趣，奖励好奇心

### Item and Upgrade System

**技能升级:**

| 等级 | 获取方式 | 效果 |
|------|----------|------|
| Lv1 | 首次获得 | 基础效果 |
| Lv2 | 再次获得 | 效果 +50% |
| Lv3 | 第三次获得 | 效果 +100%，解锁特殊效果 |

**遗物系统:**

| 稀有度 | 效果强度 | 获取途径 |
|--------|----------|----------|
| 普通 | 小幅加成 | 商店、通关奖励 |
| 稀有 | 中等加成 | 后期关卡、特殊条件 |
| 传说 | 改变玩法 | Boss掉落、完美通关、碎片合成（保底） |

### Character Selection

*V1.0 暂不实现角色系统*

**未来方向（待探索）:**
- 不同初始技能组合
- 专属被动能力
- 解锁条件绑定特定成就

### Difficulty Modifiers

**基础难度:**

| 难度 | 时间 | 目标分数 | 词语难度 | 目标玩家 |
|------|------|----------|----------|----------|
| 超简单 | 120秒 | ×0.5 | 4字母以下 | 打字新手 |
| 简单 | 90秒 | ×0.7 | 短词为主 | 休闲玩家 |
| 普通 | 60秒 | ×1.0 | 标准 | 核心玩家 |
| 困难 | 45秒 | ×1.3 | 长词增多 | 硬核玩家 |

**Ascension 递进挑战:**

首次通关普通难度后解锁，每级增加一个修改器：

| 等级 | 修改器 | 效果 |
|------|--------|------|
| A1 | 吝啬商人 | 商店价格 +25% |
| A2 | 时间压迫 | 每关时间 -5秒 |
| A3 | 精英词汇 | 出现更多长词 |
| A4 | 脆弱连击 | 连击断裂损失倍率 |
| A5+ | ... | 继续叠加 |

**待探索 - Pact 式自选难度:**
- 替代固定 Ascension 递进，允许玩家自选修改器组合
- 每个修改器有"热度值"，总热度决定奖励倍率
- 参考 Hades 的 Pact of Punishment 系统

**练习场:**
- 无失败压力的自由练习
- 可测试任意已解锁技能组合
- 不计入统计/成就

---

## Progression and Balance

### Player Progression

**单局内成长 (Run Progression):**

| 阶段 | 关卡 | 技能数 | 典型倍率 | 目标分数 |
|------|------|--------|----------|----------|
| 起步 | 1-2 | 1-2个 | 1.0-1.5x | 300-600 |
| 成型 | 3-5 | 3-5个 | 2.0-4.0x | 800-2500 |
| 爆发 | 6-8 | 5-8个 | 5.0-15x+ | 4000-20000 |

**跨局成长 (Meta Progression):**

| 阶段 | 解锁内容 | 游戏时长 |
|------|----------|----------|
| 新手期 | 基础技能池(10个)、基础遗物(5个) | 0-2小时 |
| 成长期 | 扩展技能(+10个)、稀有遗物、新词库 | 2-10小时 |
| 精通期 | 传说遗物、隐藏内容、Ascension挑战 | 10-50小时 |
| 完美期 | 全图鉴、全成就、高Ascension通关 | 50小时+ |

### Difficulty Curve

**单局难度曲线:**

| Act | 难度特征 | 目标分数系数 | 词语难度 |
|-----|----------|--------------|----------|
| Act 1 (1-3关) | 宽容，允许试错 | ×0.8 - ×1.0 | 短词(4-6字母) |
| Act 2 (4-6关) | 需要技能协同 | ×1.2 - ×1.5 | 中词(5-8字母) |
| Act 3 (7-8关) | 考验Build完成度 | ×1.8 - ×2.5 | 混合(4-12字母) |

**难度调节参数:**

| 参数 | 简单化 | 困难化 |
|------|--------|--------|
| 时间 | +30秒 | -15秒 |
| 目标分数 | ×0.7 | ×1.5 |
| 词语长度 | 限制≤6字母 | 增加长词比例 |
| 技能价格 | -25% | +50% |
| 连击保护 | 允许1次错误 | 错误即断 |

### Economy and Resources

**核心资源:**

| 资源 | 获取 | 消耗 | 设计意图 |
|------|------|------|----------|
| **金币** | 通关奖励、连击奖励、成就 | 商店购买 | 核心约束 |
| **选择权** | 每关固定获得 | 选择技能/遗物 | 简化备选方案 |
| **碎片** | 溢出金币转化、特殊条件 | 合成传说遗物 | 保底机制 |

**经济平衡（普通难度）:**

| 关卡 | 通关奖励 | 商店物品数 | 平均价格 | 可购买数 |
|------|----------|------------|----------|----------|
| 1 | 50金 | 3 | 30金 | 1-2个 |
| 2 | 60金 | 3 | 35金 | 1-2个 |
| 3 | 75金 | 4 | 40金 | 1-2个 |
| 4 | 90金 | 4 | 50金 | 1-2个 |
| 5+ | 100+金 | 4 | 60+金 | 1-2个 |

**设计目标:** 每关平均获得 1.5 个新技能/遗物，8关后约有 10-12 个构筑元素

**备选方案（简化经济）:**

| 模式 | 机制 | 优点 | 缺点 |
|------|------|------|------|
| 金币模式 | 赚钱→消费 | 经典Roguelike体验 | 计算分心 |
| 选择权模式 | 每关选1/3 | 纯粹聚焦构筑 | 深度略减 |
| 混合模式 | 基础选1 + 金币买额外 | 兼顾两者 | 复杂度高 |

*V1.0 先实现金币模式，后续版本根据反馈考虑简化*

---

## Level Design Framework

### Level Types

| 类型 | 描述 | 频率 | 特殊规则 |
|------|------|------|----------|
| **标准关** | 基础打字关卡 | 70% | 无特殊规则 |
| **精英关** | 更高目标分数 | 20% | 奖励加倍 |
| **Boss关** | 特殊机制关卡 | 10% | 见下方 |
| **休息关** | 无打字，纯选择 | Act间 | 免费技能/遗物 |

**Boss 关机制（待探索）:**

| Boss | 特殊规则 | 设计意图 |
|------|----------|----------|
| 词语血条 | 词语有HP，打错扣血 | 精准度考验 |
| 时间压迫 | 时间不断减少，打词续命 | 速度考验 |
| 限定词库 | 只出现特定类型词语 | 构筑适应性 |
| 倒打挑战 | 词语倒序显示 | 脑力挑战 |

### Level Progression

**标准 Run 结构:**

| Act | 关卡 | 特点 |
|-----|------|------|
| Act 1 | 1-3 | 标准关为主，关3可能精英，后接休息关 |
| Act 2 | 4-6 | 关5精英，后接休息关 |
| Act 3 | 7-8 | 关7精英，关8 Boss，胜利结算 |

**关卡参数递进:**

| 关卡 | 时间 | 目标分数 | 词库难度 |
|------|------|----------|----------|
| 1 | 60s | 300 | 简单 |
| 2 | 60s | 500 | 简单 |
| 3 | 60s | 800 | 简单→中等 |
| 4 | 55s | 1200 | 中等 |
| 5 | 55s | 1800 | 中等 |
| 6 | 55s | 2500 | 中等→困难 |
| 7 | 50s | 4000 | 困难 |
| 8 | 50s | 6000+ | 困难 |

### Level Generation

**词语抽取规则:**
- 词语来源：当前激活词库
- 难度匹配：按关卡词库难度分层抽取
- 重复控制：同一关内词语不重复
- 技能偏向：轻微偏向包含已绑定技能字母的词语

**商店生成规则:**
- 物品数量：3-4个
- 类型分布：至少1技能 + 至少1遗物
- 稀有度：随关卡递进提高稀有物品概率
- 协同考虑：轻微偏向与已有技能协同的物品

---

## Art and Audio Direction

### Art Style

**整体风格:** 简洁现代 + 霓虹点缀，参考 Balatro、赛博朋克

| 维度 | 方向 |
|------|------|
| 视觉调性 | 简洁现代 + 霓虹点缀 |
| 色彩 | 深色背景 + 高饱和度强调色 |
| 字体 | 等宽字体为主，清晰易读 |
| 动效 | 夸张但不干扰，强化数字爽感 |

**配色方案:**

| 元素 | 颜色 | Hex |
|------|------|-----|
| 背景 | 深灰/近黑 | #1a1a2e |
| 主文字 | 暖白 | #eaeaea |
| 正确击键 | 青绿 | #4ecdc4 |
| 错误击键 | 玫红 | #ff6b6b |
| 倍率/高分 | 金黄 | #ffe66d |
| 技能触发 | 紫色 | #9b59b6 |

**UI 布局（战斗中）:**
- 顶部 HUD：时间、倍率、金币
- 中央：词语显示区（主焦点）+ 反馈区
- 底部：进度条 + 键盘技能绑定可视化

### Audio and Music

**音效设计:**

| 事件 | 音效类型 | 设计意图 |
|------|----------|----------|
| 正确击键 | 清脆短促 click | 即时正反馈 |
| 错误击键 | 低沉 buzz | 明确错误但不刺耳 |
| 词语完成 | 上扬 ding + 分数音效 | 完成感 |
| 技能触发 | 特色音效(每技能不同) | 辨识度 |
| 连击里程碑 | 渐强 whoosh | 心流强化 |
| 倍率爆发 | 震撼 boom | 高潮时刻 |

**音乐设计:**

| 场景 | 风格 | BPM |
|------|------|-----|
| 主菜单 | Lo-fi / Chill | 80-90 |
| Act 1 战斗 | Electronic / Upbeat | 120-130 |
| Act 2 战斗 | Synthwave | 130-140 |
| Act 3 战斗 | Intense Electronic | 140-150 |
| Boss 关 | Epic / Dramatic | 150+ |
| 商店 | Ambient / Calm | 70-80 |

**音频要求:**
- 音效延迟 < 50ms
- 支持音效/音乐独立音量控制
- 支持静音模式

---

## Technical Specifications

### Performance Requirements

| 指标 | 目标值 | 优先级 |
|------|--------|--------|
| 帧率 | 60 FPS 稳定 | 必须 |
| 输入延迟 | < 16ms (1帧) | 必须 |
| 启动时间 | < 3秒 | 高 |
| 内存占用 | < 500MB | 中 |
| 安装包大小 | < 200MB | 中 |

### Platform-Specific Details

**目标平台: PC (Windows + macOS) / Steam**

| 规格 | 最低配置 | 推荐配置 |
|------|----------|----------|
| OS | Windows 10 / macOS 10.15+ | Windows 10/11 / macOS 12+ |
| CPU | 双核 2.0GHz | 四核 2.5GHz |
| RAM | 4GB | 8GB |
| GPU | 集成显卡 | 独立显卡 |
| 存储 | 500MB | 1GB |

**Steam 集成:**
- Steamworks 成就系统
- 云存档
- 排行榜 (每日挑战)
- 创意工坊 (未来: 自定义词库)

**技术栈:**

| 层级 | 技术 | 说明 |
|------|------|------|
| 语言 | TypeScript | 类型安全 + 现代特性 |
| 构建 | Vite | 快速开发体验 |
| 渲染 | Canvas 2D / WebGL | 性能优先 |
| 打包 | Electron / Tauri | 跨平台 (Win/Mac) |
| 音频 | Web Audio API | 低延迟音效 |
| 存储 | LocalStorage / IndexedDB | 本地存档 |

### Asset Requirements

**美术资产:**

| 类型 | 数量 | 规格 |
|------|------|------|
| UI 元素 | ~50个 | SVG / PNG @2x |
| 技能图标 | 20+ | 64×64 PNG |
| 遗物图标 | 30+ | 64×64 PNG |
| 粒子效果 | 10+ | Canvas/WebGL |
| 字体 | 2-3套 | WOFF2 |

**音频资产:**

| 类型 | 数量 | 规格 |
|------|------|------|
| 击键音效 | 5+ 变体 | OGG/MP3, < 100ms |
| 技能音效 | 20+ | OGG/MP3, < 500ms |
| BGM | 6-8 轨 | OGG, 循环 |

**数据资产:**

| 类型 | 数量 | 格式 |
|------|------|------|
| 词库 | 5+ | JSON |
| 技能定义 | 20+ | TypeScript/JSON |
| 遗物定义 | 30+ | TypeScript/JSON |

---

## Development Epics

### Epic Structure

| Epic | 名称 | 核心目标 | 复杂度 |
|------|------|----------|--------|
| **E0** | 原型重构 | 从原型代码重构为正式架构 | 中 |
| **E1** | 核心战斗 | 完整打字战斗循环 + 技能系统 | 高 |
| **E2** | Roguelike 循环 | Run 结构 + 商店 + 关卡进程 | 高 |
| **E3** | Meta 系统 | 解锁 + 图鉴 + 存档 | 中 |
| **E4** | 内容填充 | 技能/遗物/词库扩展 | 中 |
| **E5** | 打磨润色 | 音效 + 动画 + 平衡调整 | 中 |
| **E6** | Steam 发行 | 打包 + 成就 + 云存档 | 中 |

### Epic Details

**E0: 原型重构**
- 代码架构清理，从单文件到模块化
- 状态管理重构
- UI 组件化
- 测试框架搭建

**E1: 核心战斗**
- 打字输入系统优化
- 技能系统（被动联动 + 主动链）
- 分数/倍率计算
- 战斗 UI + 反馈动画
- 音效集成

**E2: Roguelike 循环**
- 关卡结构（8关 + 3 Acts）
- 商店系统
- 遗物系统
- 词库管理 + 难度分层
- 休息关 + Boss 关

**E3: Meta 系统**
- 永久解锁机制
- 图鉴系统
- 成就系统
- 存档/读档
- 每日挑战 + 种子系统

**E4: 内容填充**
- 技能扩展至 20+
- 遗物扩展至 30+
- 词库扩展至 5+
- 平衡数值调整
- 隐藏内容/彩蛋

**E5: 打磨润色**
- 完整音效/音乐
- 动画优化
- 难度曲线微调
- 新手引导/教程
- Bug 修复

**E6: Steam 发行**
- Electron/Tauri 打包
- Steamworks 集成
- 成就对接
- 云存档
- 商店页面/宣传素材

---

## Success Metrics

### Technical Metrics

| 指标 | 目标 | 测量方式 |
|------|------|----------|
| 帧率稳定性 | 99% 时间 ≥60fps | 性能监控 |
| 输入延迟 | P99 < 16ms | 输入时间戳测量 |
| 崩溃率 | < 0.1% 会话 | 错误追踪 |
| 加载时间 | 冷启动 < 3s | 启动计时 |
| 内存泄漏 | 长时间运行无增长 | 内存监控 |

### Gameplay Metrics

**留存指标:**

| 指标 | 目标 | 说明 |
|------|------|------|
| 首局完成率 | > 70% | 新手体验质量 |
| D1 留存 | > 40% | 次日回访率 |
| D7 留存 | > 20% | 周留存 |
| 平均游戏时长 | > 2小时 | 总游戏时间 |
| 单次会话时长 | 15-30分钟 | 符合设计目标 |

**核心循环指标:**

| 指标 | 目标 | 说明 |
|------|------|------|
| Run 完成率 | 20-30% | 难度适中 |
| 平均 Run 次数 | > 10 次 | 重玩意愿 |
| 技能使用多样性 | > 60% 技能被使用 | 平衡性 |
| 商店购买率 | > 80% 关卡后购买 | 经济系统健康 |

**心流指标:**

| 指标 | 目标 | 说明 |
|------|------|------|
| 平均 WPM | 50-80 | 目标玩家水平 |
| 连击断裂频率 | 每分钟 2-5 次 | 挑战但不挫败 |
| 技能触发频率 | 每分钟 10+ 次 | 系统参与度 |

### Business Metrics

| 指标 | EA 目标 | 正式版目标 |
|------|---------|------------|
| Steam 评价 | > 80% 好评 | > 85% 好评 |
| 销量 | 5,000+ | 20,000+ |
| 社区活跃 | 有 Discord | 活跃 Discord + 创意工坊 |

---

## Out of Scope

**V1.0 明确不做:**

| 功能 | 原因 | 未来可能性 |
|------|------|------------|
| 多人模式 | 复杂度高，核心体验优先 | V2.0+ 考虑 |
| 移动端 | 需重新设计输入方案 | 视 PC 版成功后定 |
| 角色系统 | 先验证核心循环 | V1.5+ 考虑 |
| 剧情/叙事 | 非核心体验 | 可能不做 |
| PvP 对战 | 偏离设计方向 | 低优先级 |
| 模组支持 | 技术复杂 | 创意工坊替代 |

**刻意简化:**

| 系统 | 简化决策 |
|------|----------|
| 角色 | 无角色差异，统一初始状态 |
| 词库 | 仅英文 + 拼音，暂不做原生多语言 |
| 存档 | 单存档槽，无多存档 |
| 设置 | 基础音量/难度，无深度自定义 |

---

## Assumptions and Dependencies

**核心假设:**

| 假设 | 风险 | 验证方式 |
|------|------|----------|
| 打字+Roguelike 有市场 | 中 | Demo 反馈 |
| 目标玩家 WPM 50-80 | 低 | 数据追踪 |
| 15-25分钟单局长度合适 | 低 | 玩家测试 |
| 键盘联动系统可理解 | 高 | 早期测试 |
| Web 技术栈性能足够 | 低 | 已验证 |

**技术依赖:**

| 依赖 | 版本 | 用途 |
|------|------|------|
| TypeScript | 5.x | 开发语言 |
| Vite | 5.x+ | 构建工具 |
| Electron/Tauri | 最新稳定版 | 桌面打包 |
| Steamworks SDK | 最新 | Steam 集成 |

**外部依赖:**

| 依赖 | 说明 |
|------|------|
| Steam 审核 | 发行必需 |
| 音效/音乐资产 | 需采购或制作 |
| 词库数据 | 需整理或授权 |
